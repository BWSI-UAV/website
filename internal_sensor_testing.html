

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Inspecting Sensor Feeds &mdash; Autonomous UAV Racing 0.1.0 documentation</title>
  

  
  
  
  

  

  
  
    

  

  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Hovering with Optical Flow" href="enable_optical_flow.html" />
    <link rel="prev" title="Accessing Video Streams" href="accessing_video_streams.html" /> 

  
  <script src="_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="index.html" class="icon icon-home"> Autonomous UAV Racing
          

          
          </a>

          
            
            
              <div class="version">
                0.1
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Course Agenda:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="intro.html">BWSI’s Autonomous UAV Racing</a></li>
<li class="toctree-l1"><a class="reference internal" href="initial_setup.html">Module 0: UAV Environment Setup</a></li>
<li class="toctree-l1"><a class="reference internal" href="quadrotor_basics.html">Module 1: Hands-On Quadrotors</a></li>
<li class="toctree-l1"><a class="reference internal" href="computer_vision.html">Module 2: Computer Vision</a></li>
<li class="toctree-l1"><a class="reference internal" href="planning_control.html">Module 3: Estimation &amp; Control</a></li>
<li class="toctree-l1"><a class="reference internal" href="racing_challenges.html">Module 4: Racing Challenges</a></li>
</ul>
<p class="caption"><span class="caption-text">Practicals:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="project_workflow.html">Project Workflow</a></li>
<li class="toctree-l1"><a class="reference internal" href="student_drone_setup.html">Student Drone Setup</a></li>
<li class="toctree-l1"><a class="reference internal" href="calibration.html">Calibrating Intel RTF Drones</a></li>
<li class="toctree-l1"><a class="reference internal" href="flight_log_analysis.html">Flight Log Analysis</a></li>
<li class="toctree-l1"><a class="reference internal" href="intel_rtf_architecture.html">Architecture Concept Review</a></li>
<li class="toctree-l1"><a class="reference internal" href="ros_introduction.html">Intro to ROS</a></li>
<li class="toctree-l1"><a class="reference internal" href="communication_pipeline.html">Communication Pipeline</a></li>
<li class="toctree-l1"><a class="reference internal" href="accessing_video_streams.html">Accessing Video Streams</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Inspecting Sensor Feeds</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#Measuring-Translational-Movement-(Accelerometer)">Measuring Translational Movement (Accelerometer)</a></li>
<li class="toctree-l2"><a class="reference internal" href="#Measuring-Angular-Motion-(Gyroscope)">Measuring Angular Motion (Gyroscope)</a></li>
<li class="toctree-l2"><a class="reference internal" href="#Trying-out-Optical-Flow">Trying out Optical Flow</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="enable_optical_flow.html">Hovering with Optical Flow</a></li>
<li class="toctree-l1"><a class="reference internal" href="coordinate_transforms.html">Coordinate Frames</a></li>
<li class="toctree-l1"><a class="reference internal" href="downward_cam_bag.html">Downward Camera Recording + Line Detection</a></li>
<li class="toctree-l1"><a class="reference internal" href="detector.html">Custom ROS Message for Line Params</a></li>
<li class="toctree-l1"><a class="reference internal" href="open_loop_translation_control.html">OFFBOARD Mode &amp; Open Loop Control</a></li>
<li class="toctree-l1"><a class="reference internal" href="yaw_color_tracker.html">Yaw-Only Color Tracker</a></li>
<li class="toctree-l1"><a class="reference internal" href="line_following.html">Line Following</a></li>
<li class="toctree-l1"><a class="reference internal" href="obstacle_avoidance.html">AR Obstacle Avoidance</a></li>
</ul>
<p class="caption"><span class="caption-text">Advanced Topics:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="exploring_px4_firmware.html">Exploring PX4 Firmware</a></li>
</ul>
<p class="caption"><span class="caption-text">Supplemental Material:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="team_roles.html">Team Roles</a></li>
<li class="toctree-l1"><a class="reference internal" href="safety_checklist.html">Safety Checklist</a></li>
<li class="toctree-l1"><a class="reference internal" href="Glossary.html">Glossary</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">Autonomous UAV Racing</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html">Docs</a> &raquo;</li>
        
      <li>Inspecting Sensor Feeds</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="_sources/internal_sensor_testing.ipynb.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  
<style>
/* CSS overrides for sphinx_rtd_theme */

/* 24px margin */
.nbinput.nblast,
.nboutput.nblast {
    margin-bottom: 19px;  /* padding has already 5px */
}

/* ... except between code cells! */
.nblast + .nbinput {
    margin-top: -19px;
}

.admonition > p:before {
    margin-right: 4px;  /* make room for the exclamation icon */
}
</style>
<div class="section" id="Inspecting-Sensor-Feeds">
<h1>Inspecting Sensor Feeds<a class="headerlink" href="#Inspecting-Sensor-Feeds" title="Permalink to this headline">¶</a></h1>
<p>In this exercise, you will learn more about how to graph and interpret
sensor data from the Intel RTF Drone.</p>
<div class="section" id="Measuring-Translational-Movement-(Accelerometer)">
<h2>Measuring Translational Movement (Accelerometer)<a class="headerlink" href="#Measuring-Translational-Movement-(Accelerometer)" title="Permalink to this headline">¶</a></h2>
<p>The inertial measurement unit (IMU) on board the Intel RTF Drone has an
accelerometer that can measure translational accelerations to relatively
high precision. The following steps will show you how to access this
data in QGroundControl.</p>
<ul>
<li><p class="first">From the QGroundControl top menu bar, select Analyze under Widgets.</p>
</li></li>
</ul>
<div class="figure" id="id1">
<img alt="widgets.png" src="https://github.com/BWSI-UAV/website/blob/master/docs/images/widgets.png?raw=true" />
<p class="caption"><span class="caption-text">widgets.png</span></p>
</div>
<ul class="simple">
<li>In Analyze, enter ‘acc’ into the filter box.</li>
</ul>
<div class="figure" id="id2">
<img alt="acc.png" src="https://github.com/BWSI-UAV/website/blob/master/docs/images/acc.png?raw=true" />
<p class="caption"><span class="caption-text">acc.png</span></p>
</div>
<ul class="simple">
<li>Select the check box for IMU.zacc, and verify that the resulting
graph is close to -9.81 m/s^2 (gravity)</li>
</ul>
<div class="figure" id="id3">
<img alt="zacc.png" src="https://github.com/BWSI-UAV/website/blob/master/docs/images/zacc.png?raw=true" />
<p class="caption"><span class="caption-text">zacc.png</span></p>
</div>
<ul class="simple">
<li>Now tap the table surrounding the drone and see if IMU.zacc changes.
Try tapping underneath the drone from below the table. As you may
notice, tapping the drone in the same plane as the drone will not
cause large changes in IMU.zacc.</li>
<li>Deselect IMU.zacc and select IMU.xacc and IMU.yacc. Verify that the
resulting graphs are close to zero. Now try those same taps with
IMU.xacc and IMU.yacc. As you may have guessed, taps in the plane
affect these values much more significantly than taps below or above
the drone.</li>
</ul>
<div class="figure" id="id4">
<img alt="xacc_yacc.png" src="https://github.com/BWSI-UAV/website/blob/master/docs/images/xacc_yacc.png?raw=true" />
<p class="caption"><span class="caption-text">xacc_yacc.png</span></p>
</div>
</div>
<div class="section" id="Measuring-Angular-Motion-(Gyroscope)">
<h2>Measuring Angular Motion (Gyroscope)<a class="headerlink" href="#Measuring-Angular-Motion-(Gyroscope)" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li>In Analyze, select roll, pitch, and yaw by selecting them using the
filter box.</li>
<li>First, try changing the yaw value by rotating the drone around the z
axis (imagine a circle under the drone on the table, and rotate it
around that circle.) The yaw value should cycle between pi/2 and
negative pi/2.</li>
<li>Next, try rolling the drone by rotating it around the x axis (goes
from the power button to the camera) and watching the roll value in
Analyze.</li>
<li>Finally, try pitching the drone by rotating around the y axis (the
one axis you haven’t tried yet, goes from one side of the drone to
the other) and watching the pitch value change.</li>
</ul>
</div>
<div class="section" id="Trying-out-Optical-Flow">
<h2>Trying out Optical Flow<a class="headerlink" href="#Trying-out-Optical-Flow" title="Permalink to this headline">¶</a></h2>
<p>Optical flow sensors help the drone estimate its current position by
tracking features on the ground (you will learn more about the theory of
optical flow later in the course.)</p>
<p>Here are the steps to activating optical flow on the drone. * Plug in
the Teraranger USB cable to the drone USB port. Ask an instructor for
help if need be. * SSH into the drone from the team laptop. Run the
following commands</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">cd</span> <span class="o">~/</span><span class="n">catkin_ws</span><span class="o">/</span><span class="n">src</span><span class="o">/</span><span class="n">aero</span><span class="o">-</span><span class="n">optical</span><span class="o">-</span><span class="n">flow</span><span class="o">/</span><span class="n">build</span>
<span class="n">roscore</span> <span class="o">&amp;</span>
<span class="n">sudo</span> <span class="o">-</span><span class="n">E</span> <span class="n">aero</span><span class="o">-</span><span class="n">optical</span><span class="o">-</span><span class="n">flow</span> <span class="o">&amp;</span>
<span class="n">systemctl</span> <span class="n">start</span> <span class="n">aero</span><span class="o">-</span><span class="n">teraranger</span><span class="o">.</span><span class="n">service</span>
</pre></div>
</div>
<ul class="simple">
<li>Now return to QGroundControl on the laptop. Open
<code class="docutils literal notranslate"><span class="pre">Widgets</span> <span class="pre">&gt;</span> <span class="pre">MAVLink</span> <span class="pre">Inspector</span></code> <img alt="mavlink.png" src="https://github.com/BWSI-UAV/website/blob/master/docs/images/mavlink.png?raw=true" /></li>
<li>Scroll to OPTICAL_FLOW_RAD, and expand it. Make sure the quality is &gt;
100 (hold the drone over a textured surface to increase quality).
<img alt="optical-flow.png" src="https://github.com/BWSI-UAV/website/blob/master/docs/images/optical-flow.png?raw=true" /></li>
<li>Now go to LOCAL_POSITION_NED, and expand it. <img alt="local-position.png" src="https://github.com/BWSI-UAV/website/blob/master/docs/images/local-position.png?raw=true" /></li>
<li>If you move the drone over a textured surface, you’ll be able to see
the position estimate of the drone changing as new information comes
in from the optical flow sensor, distance sensor, and IMU.</li>
</ul>
<p>This is how the drone stabilizes itself in position control mode. It
tries to maintain whatever initial position it reads, and RC control
inputs modify that set position, causing the drone to center itself on a
new point.</p>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="enable_optical_flow.html" class="btn btn-neutral float-right" title="Hovering with Optical Flow" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="accessing_video_streams.html" class="btn btn-neutral" title="Accessing Video Streams" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2018, Ross Allen.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'./',
            VERSION:'0.1.0',
            LANGUAGE:'None',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true,
            SOURCELINK_SUFFIX: '.txt'
        };
    </script>
      <script type="text/javascript" src="_static/jquery.js"></script>
      <script type="text/javascript" src="_static/underscore.js"></script>
      <script type="text/javascript" src="_static/doctools.js"></script>
      <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

  

  <script type="text/javascript" src="_static/js/theme.js"></script>

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>