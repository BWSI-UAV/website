

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Simulation Challenge &mdash; Autonomous UAV Racing 0.1.0 documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script type="text/javascript" src="_static/jquery.js"></script>
        <script type="text/javascript" src="_static/underscore.js"></script>
        <script type="text/javascript" src="_static/doctools.js"></script>
        <script type="text/javascript" src="_static/language_data.js"></script>
        <script async="async" type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
        <script type="text/x-mathjax-config">MathJax.Hub.Config({"tex2jax": {"inlineMath": [["$", "$"], ["\\(", "\\)"]], "processEscapes": true, "ignoreClass": "document", "processClass": "math|output_area"}})</script>
    
    <script type="text/javascript" src="_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Advanced linefollowing ideas" href="advanced_linefollowing_ideas.html" />
    <link rel="prev" title="Kalman Filters" href="kalman_filters.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="index.html" class="icon icon-home"> Autonomous UAV Racing
          

          
          </a>

          
            
            
              <div class="version">
                0.1
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Course Agenda:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="intro.html">BWSI’s Autonomous UAV Racing</a></li>
<li class="toctree-l1"><a class="reference internal" href="initial_setup.html">Module 0: UAV Environment Setup</a></li>
<li class="toctree-l1"><a class="reference internal" href="quadrotor_basics.html">Module 1: Hands-On Quadrotors</a></li>
<li class="toctree-l1"><a class="reference internal" href="computer_vision.html">Module 2: Computer Vision</a></li>
<li class="toctree-l1"><a class="reference internal" href="planning_control.html">Module 3: Estimation &amp; Control</a></li>
<li class="toctree-l1"><a class="reference internal" href="racing_challenges.html">Module 4: Racing Challenges</a></li>
</ul>
<p class="caption"><span class="caption-text">Practicals:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="project_workflow.html">Project Workflow</a></li>
<li class="toctree-l1"><a class="reference internal" href="student_drone_setup.html">Student Drone Setup</a></li>
<li class="toctree-l1"><a class="reference internal" href="calibration.html">Calibrating Intel RTF Drones</a></li>
<li class="toctree-l1"><a class="reference internal" href="flight_log_analysis.html">Flight Log Analysis</a></li>
<li class="toctree-l1"><a class="reference internal" href="intel_rtf_architecture.html">Architecture Concept Review</a></li>
<li class="toctree-l1"><a class="reference internal" href="ros_introduction.html">Intro to ROS</a></li>
<li class="toctree-l1"><a class="reference internal" href="communication_pipeline.html">Communication Pipeline</a></li>
<li class="toctree-l1"><a class="reference internal" href="accessing_video_streams.html">Accessing Video Streams</a></li>
<li class="toctree-l1"><a class="reference internal" href="internal_sensor_testing.html">Inspecting Sensor Feeds</a></li>
<li class="toctree-l1"><a class="reference internal" href="enable_optical_flow.html">Hovering with Optical Flow</a></li>
<li class="toctree-l1"><a class="reference internal" href="coordinate_transforms.html">Coordinate Frames</a></li>
<li class="toctree-l1"><a class="reference internal" href="downward_cam_bag.html">Downward Camera Analysis + Line Detection</a></li>
<li class="toctree-l1"><a class="reference internal" href="detector.html">Custom ROS Message for Line Params</a></li>
<li class="toctree-l1"><a class="reference internal" href="open_loop_translation_control.html">OFFBOARD Mode &amp; Open Loop Control</a></li>
<li class="toctree-l1"><a class="reference internal" href="yaw_color_tracker.html">Yaw-Only Color Tracker</a></li>
<li class="toctree-l1"><a class="reference internal" href="line_following.html">Line Following</a></li>
<li class="toctree-l1"><a class="reference internal" href="obstacle_avoidance.html">AR Obstacle Avoidance</a></li>
</ul>
<p class="caption"><span class="caption-text">Advanced Topics:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="vim_tutorial.html">Vim Text Editor</a></li>
<li class="toctree-l1"><a class="reference internal" href="exploring_px4_firmware.html">Exploring PX4 Firmware</a></li>
<li class="toctree-l1"><a class="reference internal" href="kalman_filters.html">Kalman Filters</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Simulation Challenge</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#Challenge-Description">Challenge Description</a></li>
<li class="toctree-l2"><a class="reference internal" href="#Challenge-Phases">Challenge Phases</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#Phase-1">Phase 1</a></li>
<li class="toctree-l3"><a class="reference internal" href="#Phase-2">Phase 2</a></li>
<li class="toctree-l3"><a class="reference internal" href="#Phase-3">Phase 3</a></li>
<li class="toctree-l3"><a class="reference internal" href="#Phase-4">Phase 4</a></li>
<li class="toctree-l3"><a class="reference internal" href="#Phase-5">Phase 5</a></li>
<li class="toctree-l3"><a class="reference internal" href="#Phase-6">Phase 6</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="advanced_linefollowing_ideas.html">Advanced linefollowing ideas</a></li>
</ul>
<p class="caption"><span class="caption-text">Supplemental Material:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="team_roles.html">Team Roles</a></li>
<li class="toctree-l1"><a class="reference internal" href="safety_checklist.html">Safety Checklist</a></li>
<li class="toctree-l1"><a class="reference internal" href="connecting_with_VSCode.html">Connecting to the drone with VSCode</a></li>
<li class="toctree-l1"><a class="reference internal" href="ar_tag_generation.html">AR tag generation</a></li>
<li class="toctree-l1"><a class="reference internal" href="Glossary.html">Glossary</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">Autonomous UAV Racing</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html">Docs</a> &raquo;</li>
        
      <li>Simulation Challenge</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="_sources/simulation_challenge.ipynb.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  
<style>
/* CSS overrides for sphinx_rtd_theme */

/* 24px margin */
.nbinput.nblast,
.nboutput.nblast {
    margin-bottom: 19px;  /* padding has already 5px */
}

/* ... except between code cells! */
.nblast + .nbinput {
    margin-top: -19px;
}

.admonition > p:before {
    margin-right: 4px;  /* make room for the exclamation icon */
}

/* Fix math alignment, see https://github.com/rtfd/sphinx_rtd_theme/pull/686 */
.math {
    text-align: unset;
}
</style>
<div class="section" id="Simulation-Challenge">
<h1>Simulation Challenge<a class="headerlink" href="#Simulation-Challenge" title="Permalink to this headline">¶</a></h1>
<p><strong>Example: PX4 SITL in a simple Gazebo environment:</strong></p>
<iframe width="560" height="315" src="https://www.youtube.com/embed/sEKJBQGInx8?start=21" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe><div class="section" id="Challenge-Description">
<h2>Challenge Description<a class="headerlink" href="#Challenge-Description" title="Permalink to this headline">¶</a></h2>
<p>This advanced challenge poses the task of creating a simulation environment for the race course. You will run PX4 flight code on your computer to emulate a virtual drone, which can be connected to using your team’s RC controller and QGroundControl. This leverages PX4’s support of <em>Software In the Loop (SITL)</em> simulation, where the PX4 toolchain runs on your computer instead of on the drone’s flight controller.</p>
<p><a class="reference external" href="https://dev.px4.io/v1.9.0/en/simulation/index.html">Reference: PX4 Simulation Documentation</a></p>
</div>
<div class="section" id="Challenge-Phases">
<h2>Challenge Phases<a class="headerlink" href="#Challenge-Phases" title="Permalink to this headline">¶</a></h2>
<div class="admonition note">
<p class="admonition-title fa fa-exclamation-circle"><strong>Note:</strong></p>
<p>This challenge entails an important <em>technical writing</em> component - as you complete each phase of the challenge, you must document all steps (including code comments) necessary to set up and replicate your simulated environment from scratch, in a similar style to the instructions on this website. Someone on another team should be able to reproduce your simulation environment following only the documentation and code provided, without any verbal instructions.</p>
</div>
<div class="section" id="Phase-1">
<h3>Phase 1<a class="headerlink" href="#Phase-1" title="Permalink to this headline">¶</a></h3>
<p>Create a simple drone simulation environment in Gazebo utilizing PX4 SITL. The PX4 website has a useful getting started guide:</p>
<p><a class="reference external" href="https://dev.px4.io/v1.9.0/en/simulation/gazebo.html">https://dev.px4.io/v1.9.0/en/simulation/gazebo.html</a></p>
<ul class="simple">
<li><p>Use an X-configuration quadrotor airframe and specify <code class="docutils literal notranslate"><span class="pre">EKF2</span></code> for the <code class="docutils literal notranslate"><span class="pre">PX4_ESTIMATOR</span></code>.</p></li>
<li><p>Command the drone to arm, and to take off by publishing commands to <code class="docutils literal notranslate"><span class="pre">MAVROS</span></code> from the terminal, e.g., <code class="docutils literal notranslate"><span class="pre">rosservice</span> <span class="pre">call</span> <span class="pre">/mavros/cmd/takeoff</span> <span class="pre">&quot;{TODO}&quot;</span></code>.</p></li>
</ul>
<div class="admonition warning">
<p class="admonition-title fa fa-exclamation-circle"><strong>Warning:</strong></p>
<p><strong>Turn off Wi-Fi on your laptop</strong> before publishing any MAVROS commands for the first time, e.g., with <code class="docutils literal notranslate"><span class="pre">rosservice</span> <span class="pre">call</span> <span class="pre">/mavros/cmd/</span></code>.</p>
<p>Ensure QGroundControl and your laptop are <strong>never connected</strong> to your physical drone when testing your simulation environment. Never use <code class="docutils literal notranslate"><span class="pre">rosservice</span> <span class="pre">call</span> <span class="pre">/mavros/cmd/</span></code> with your physical drones.</p>
</div>
<p><strong>Document all steps in this phase and all following phases. Your results should be reproducible by another team solely from following the technical guide you author in each phase.</strong></p>
</div>
<div class="section" id="Phase-2">
<h3>Phase 2<a class="headerlink" href="#Phase-2" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>Demonstrate the ability to command open-loop velocities as well as a setpoint position to the drone.</p></li>
<li><p>Run your skywriting challenge code in simulation.</p></li>
<li><p>Document any changes necessary to reproduce your results.</p></li>
</ul>
</div>
<div class="section" id="Phase-3">
<h3>Phase 3<a class="headerlink" href="#Phase-3" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>Add an LED rope to the Gazebo environment and a downward camera stream to enable line-following</p></li>
<li><p>Document all steps to reproduce your changes.</p></li>
</ul>
</div>
<div class="section" id="Phase-4">
<h3>Phase 4<a class="headerlink" href="#Phase-4" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>Add gate obstacles and AR Tags for your drone to test obstacle avoidance in simulation.</p></li>
<li><p>Document all steps to reproduce your changes.</p></li>
</ul>
</div>
<div class="section" id="Phase-5">
<h3>Phase 5<a class="headerlink" href="#Phase-5" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>Enable optical flow and a downward distance sensor. You may need to add additional texture to your simulated environment.</p></li>
<li><p>Disable GPS.</p>
<ul>
<li><p>Can you still follow the line from Phase 3 and fly the obstacle course from Phase 4?</p></li>
</ul>
</li>
<li><p>Document all steps.</p></li>
</ul>
</div>
<div class="section" id="Phase-6">
<h3>Phase 6<a class="headerlink" href="#Phase-6" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>Port your simulated environment to Microsoft AirSim.</p></li>
<li><p><a class="reference external" href="https://github.com/Microsoft/AirSim/blob/master/docs/px4_setup.md">Reference: PX4 support for AirSim</a></p></li>
<li><p>Document all steps to reproduce your changes.</p></li>
</ul>
<p><strong>Microsoft AirSim:</strong></p>
<iframe width="560" height="315" src="https://www.youtube.com/embed/-WfTr1-OBGQ" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe></div>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="advanced_linefollowing_ideas.html" class="btn btn-neutral float-right" title="Advanced linefollowing ideas" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="kalman_filters.html" class="btn btn-neutral float-left" title="Kalman Filters" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2019, Ross Allen

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>