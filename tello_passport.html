<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Tello Passport &mdash; Autonomous Air Vehicle Racing 0.2.0 documentation</title>
      <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/doctools.js"></script>
        <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
        <script async="async" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
        <script>window.MathJax = {"tex": {"inlineMath": [["$", "$"], ["\\(", "\\)"]], "processEscapes": true}, "options": {"ignoreHtmlClass": "tex2jax_ignore|mathjax_ignore|document", "processHtmlClass": "tex2jax_process|mathjax_process|math|output_area"}}</script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Vim Text Editor" href="vim_tutorial.html" />
    <link rel="prev" title="AR Obstacle Avoidance" href="obstacle_avoidance.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="index.html" class="icon icon-home"> Autonomous Air Vehicle Racing
          </a>
              <div class="version">
                0.2
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Course Agenda:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="intro.html">BWSI’s Autonomous Air Vehicle Racing</a></li>
<li class="toctree-l1"><a class="reference internal" href="Syllabus.html">2021 Course Syllabus</a></li>
<li class="toctree-l1"><a class="reference internal" href="initial_setup.html">Module 0: UAV Environment Setup</a></li>
<li class="toctree-l1"><a class="reference internal" href="quadrotor_basics.html">Module 1: Hands-On Quadrotors</a></li>
<li class="toctree-l1"><a class="reference internal" href="computer_vision.html">Module 2: Computer Vision</a></li>
<li class="toctree-l1"><a class="reference internal" href="planning_control.html">Module 3: Estimation &amp; Control</a></li>
<li class="toctree-l1"><a class="reference internal" href="racing_challenges.html">Module 4: Racing Challenges</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">BWSI &#64; Home:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="tello_intro.html">Course Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="tello_intro.html#Passport-Curriculum">Passport Curriculum</a></li>
<li class="toctree-l1"><a class="reference internal" href="tello_intro.html#Final-Project">Final Project</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Practicals:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="project_workflow.html">Project Workflow</a></li>
<li class="toctree-l1"><a class="reference internal" href="code_debugging.html">Bugged Zip Sims Repo</a></li>
<li class="toctree-l1"><a class="reference internal" href="student_drone_setup.html">Student Drone Setup</a></li>
<li class="toctree-l1"><a class="reference internal" href="calibration.html">Calibrating Intel RTF Drones</a></li>
<li class="toctree-l1"><a class="reference internal" href="flight_log_analysis.html">Flight Log Analysis</a></li>
<li class="toctree-l1"><a class="reference internal" href="intel_rtf_architecture.html">Architecture Concept Review</a></li>
<li class="toctree-l1"><a class="reference internal" href="ros_introduction.html">Intro to ROS</a></li>
<li class="toctree-l1"><a class="reference internal" href="communication_pipeline.html">Communication Pipeline</a></li>
<li class="toctree-l1"><a class="reference internal" href="accessing_video_streams.html">Accessing Video Streams</a></li>
<li class="toctree-l1"><a class="reference internal" href="internal_sensor_testing.html">Inspecting Sensor Feeds</a></li>
<li class="toctree-l1"><a class="reference internal" href="enable_optical_flow.html">Hovering with Optical Flow</a></li>
<li class="toctree-l1"><a class="reference internal" href="coordinate_transforms.html">Coordinate Frames</a></li>
<li class="toctree-l1"><a class="reference internal" href="downward_cam_bag.html">Downward Camera Analysis + Line Detection</a></li>
<li class="toctree-l1"><a class="reference internal" href="detector.html">Custom ROS Message for Line Params</a></li>
<li class="toctree-l1"><a class="reference internal" href="open_loop_translation_control.html">OFFBOARD Mode &amp; Open Loop Control</a></li>
<li class="toctree-l1"><a class="reference internal" href="yaw_color_tracker.html">Yaw-Only Color Tracker</a></li>
<li class="toctree-l1"><a class="reference internal" href="line_following.html">Line Following</a></li>
<li class="toctree-l1"><a class="reference internal" href="obstacle_avoidance.html">AR Obstacle Avoidance</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Tello Passport</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#Unit-1---Connection-and-Position-Control">Unit 1 - Connection and Position Control</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#Connect-to-Drone">Connect to Drone</a></li>
<li class="toctree-l3"><a class="reference internal" href="#Take-Off-and-Hover">Take Off and Hover</a></li>
<li class="toctree-l3"><a class="reference internal" href="#Controlled-Flight">Controlled Flight</a></li>
<li class="toctree-l3"><a class="reference internal" href="#Fly-Around-an-Object">Fly Around an Object</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#Unit-2---Tello-Computer-Vision">Unit 2 - Tello Computer Vision</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#Detect-ArUco-Markers">Detect ArUco Markers</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#Why-do-we-use-ArUco-Tags?">Why do we use ArUco Tags?</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#Finding-Center-of-Tags">Finding Center of Tags</a></li>
<li class="toctree-l3"><a class="reference internal" href="#Calculating-Distance-and-Orientation">Calculating Distance and Orientation</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#Unit-3---Tello-Control">Unit 3 - Tello Control</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#Fly-in-a-Perfect-Circle">Fly in a Perfect Circle</a></li>
<li class="toctree-l3"><a class="reference internal" href="#Yaw-ArUco-Marker-Tracker">Yaw ArUco Marker Tracker</a></li>
<li class="toctree-l3"><a class="reference internal" href="#Stationary-ArUco-Marker-Tracker">Stationary ArUco Marker Tracker</a></li>
</ul>
</li>
</ul>
</li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Advanced Topics:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="vim_tutorial.html">Vim Text Editor</a></li>
<li class="toctree-l1"><a class="reference internal" href="exploring_px4_firmware.html">Exploring PX4 Firmware</a></li>
<li class="toctree-l1"><a class="reference internal" href="kalman_filters.html">Kalman Filters</a></li>
<li class="toctree-l1"><a class="reference internal" href="simulation_challenge.html">Simulation Challenge</a></li>
<li class="toctree-l1"><a class="reference internal" href="advanced_linefollowing_ideas.html">Advanced linefollowing ideas</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Supplemental Material:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="team_roles.html">Team Roles</a></li>
<li class="toctree-l1"><a class="reference internal" href="safety_checklist.html">Safety Checklist</a></li>
<li class="toctree-l1"><a class="reference internal" href="connecting_with_VSCode.html">Connecting to the drone with VSCode</a></li>
<li class="toctree-l1"><a class="reference internal" href="ar_tag_generation.html">AR tag generation</a></li>
<li class="toctree-l1"><a class="reference internal" href="Glossary.html">Glossary</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">Autonomous Air Vehicle Racing</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home"></a> &raquo;</li>
      <li>Tello Passport</li>
      <li class="wy-breadcrumbs-aside">
            <a href="_sources/tello_passport.ipynb.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  
<style>
/* CSS overrides for sphinx_rtd_theme */

/* 24px margin */
.nbinput.nblast.container,
.nboutput.nblast.container {
    margin-bottom: 19px;  /* padding has already 5px */
}

/* ... except between code cells! */
.nblast.container + .nbinput.container {
    margin-top: -19px;
}

.admonition > p:before {
    margin-right: 4px;  /* make room for the exclamation icon */
}

/* Fix math alignment, see https://github.com/rtfd/sphinx_rtd_theme/pull/686 */
.math {
    text-align: unset;
}
</style>
<section id="Tello-Passport">
<h1>Tello Passport<a class="headerlink" href="#Tello-Passport" title="Permalink to this headline"></a></h1>
<img alt="DJI Tello" src="_images/dji_tello.jpg" />
<p>This set of practicals for the virtual BWSI &#64; Home utilize the DJI Tello Drone and its Python SDK. All the challenges should be completed using Python &gt;= 3.6.</p>
<p>SDK documentation for the <code class="docutils literal notranslate"><span class="pre">djitellopy</span></code> library is available <a class="reference external" href="https://github.com/damiafuentes/DJITelloPy">here</a>. As of December 2021, this repository is more actively maintained than DJI’s <a class="reference external" href="https://github.com/dji-sdk/Tello-Python">official repository</a> There are also lots of great YouTube tutorials if you get stuck.</p>
<p>The content on this page is adapted from the PowerPoint <a class="reference external" href="https://docs.google.com/presentation/d/1SC3_OhWSF_d4qqDmIjC6JQNsKg4HjwY8/edit?usp=sharing&amp;ouid=114346723619000512750&amp;rtpof=true&amp;sd=true">slide deck</a> used to track student progress. As this page is a work in progress, suggestions are welcome.</p>
<section id="Unit-1---Connection-and-Position-Control">
<h2>Unit 1 - Connection and Position Control<a class="headerlink" href="#Unit-1---Connection-and-Position-Control" title="Permalink to this headline"></a></h2>
<p>In this unit you will write code to connect to, receive telemetry from, and send commands to your Tello drone to allow you to fly in position control.</p>
<p>Challenges include:</p>
<ul class="simple">
<li><p>Connect to your drone</p></li>
<li><p>Display drone telemetry</p></li>
<li><p>Fly your drone in position control</p></li>
<li><p>Fly around objects in your house</p></li>
</ul>
<p>If you get stuck, refer to the resources page and reach out to other students and your instructors for help!</p>
<section id="Connect-to-Drone">
<h3>Connect to Drone<a class="headerlink" href="#Connect-to-Drone" title="Permalink to this headline"></a></h3>
<p>Write a simple script in your IDE of choice to initialize your Tello, connect to it over Wi-Fi, and display some basic information about the drone (e.g. battery percentage) to confirm that you have successfully connected. When done, take a screenshot of your python output where you printed your drone information and show it to your instructors. You may run into seem errors establishing a socket connection through the SDK. Make sure you read the documentation FAQs before asking for help.</p>
</section>
<section id="Take-Off-and-Hover">
<h3>Take Off and Hover<a class="headerlink" href="#Take-Off-and-Hover" title="Permalink to this headline"></a></h3>
<p>Write a script to connect to your Tello the same way you did in the previous challenge, but now, have the drone takeoff, hover for a certain period of time (e.g. 3 seconds), then land. Hint: use the <code class="docutils literal notranslate"><span class="pre">sleep()</span></code> function from the <code class="docutils literal notranslate"><span class="pre">time</span></code> package to have the drone hover before it lands. When done, take a picture of your Tello with your phone while it’s hovering.</p>
</section>
<section id="Controlled-Flight">
<h3>Controlled Flight<a class="headerlink" href="#Controlled-Flight" title="Permalink to this headline"></a></h3>
<p>Write a script to fly around your room via commands that tell the drone to move a specific distance. (e.g. make your drone fly in a square) Hint: The <code class="docutils literal notranslate"><span class="pre">move()</span></code> and <code class="docutils literal notranslate"><span class="pre">rotate_clockwise()</span></code> functions will help a lot! Take a video on your phone and embed the link on the next slide. YouTube unlisted might be a good way to do this if you have an account.</p>
</section>
<section id="Fly-Around-an-Object">
<h3>Fly Around an Object<a class="headerlink" href="#Fly-Around-an-Object" title="Permalink to this headline"></a></h3>
<p>Write a script to fly around a specific object in your room via commands that tell the drone to move a specific distance. (e.g. fly around a chair) <strong>Get creative!!</strong></p>
<p>Take a video on your phone and upload to an unlisted YouTube video. Think - where is programming a predefined series of instructions like this likely to be useful, and where will it fail?</p>
</section>
</section>
<section id="Unit-2---Tello-Computer-Vision">
<h2>Unit 2 - Tello Computer Vision<a class="headerlink" href="#Unit-2---Tello-Computer-Vision" title="Permalink to this headline"></a></h2>
<p>In this unit you will write code that allows you to stream video being taken by your Tello camera drone via python’s open source computer vision library (Open CV).</p>
<section id="Detect-ArUco-Markers">
<h3>Detect ArUco Markers<a class="headerlink" href="#Detect-ArUco-Markers" title="Permalink to this headline"></a></h3>
<p>Write a simple script in your IDE of choice to stream video from your Tello’s camera and display via OpenCV. Hint: Don’t forget to use the <code class="docutils literal notranslate"><span class="pre">streamon()</span></code> and <code class="docutils literal notranslate"><span class="pre">get_frame_read()</span></code> functions from the <code class="docutils literal notranslate"><span class="pre">djitellopy</span></code> package! When done, take a screenshot of the opencv window with the Tello camera pointing at your face with your face shields on and paste the screenshot on the next slide to show us that you’ve completed the challenge!</p>
<p>Generate your own ArUco Markers via this <a class="reference external" href="https://chev.me/arucogen/">link</a></p>
<p>Standard Parameters: Dictionary - 5 x 5 Marker size, mm - 150</p>
<p>Feel free to modify the Marker ID. You might need multiple ArUco tags for future project work!</p>
<p>Now use the aruco module from the opencv-contrib-python package to detect aruco markers from your Tello’s live camera feed. The goal is to detect ID numbers and be able to return the pixel locations of the four corners of the aruco markers that appear in your video stream.</p>
<div class="admonition note">
<p class="admonition-title fa fa-exclamation-circle"><strong>Note:</strong></p>
<p>You may need to do a significant amount of research on your own for this challenge but do not be afraid to reach out to your peers and instructors for help. When done, take a screenshot of the opencv window that pops up with the aruco marker detected by the script your wrote.</p>
</div>
<section id="Why-do-we-use-ArUco-Tags?">
<h4>Why do we use ArUco Tags?<a class="headerlink" href="#Why-do-we-use-ArUco-Tags?" title="Permalink to this headline"></a></h4>
<p>AR tags, or more specifically, aruco markers are helpful features that we can utilize when attempting autonomous flight because they are easily recognizable by computer vision algorithms that we write, can convey information based on their ID numbers, and can tell us about our drone’s relative distance and orientation from the markers</p>
<p>When flying autonomously, your drone will need to know it’s relative distance and orientation to the aruco marker that it detects. To know this information, you will need to extract properties of the aruco marker that that are not given to you by default by the function used in the previous section.</p>
</section>
</section>
<section id="Finding-Center-of-Tags">
<h3>Finding Center of Tags<a class="headerlink" href="#Finding-Center-of-Tags" title="Permalink to this headline"></a></h3>
<p>Since you are given corners, you can create a function that finds the average side length of the aruco marker and another that sets a target for the drone to follow at the center (centroid) of the aruco marker. Write a python class called Marker with a constructor that takes in the ID and the four corner values of the aruco marker. When the constructor is called to create an object, call functions (that you will write as well) to calculate the marker’s average side length and centroid and store
these values as object attributes that can be referenced when scanning markers in your autonomous flight scripts.</p>
</section>
<section id="Calculating-Distance-and-Orientation">
<h3>Calculating Distance and Orientation<a class="headerlink" href="#Calculating-Distance-and-Orientation" title="Permalink to this headline"></a></h3>
<p>Now we have information about how far our drone is from the aruco marker. (average slide length, more pixels = closer, less pixels = farther) We also know which direction the drone is pointing relative to the marker based on the location of the centroid to the middle of the video stream output (a little to the left, a little above, etc.). This is great information, but how do we know where exactly our drone is relative to the marker?</p>
<p>This requires us to look at the shape of the marker.</p>
<p><strong>Brainstorm a method for determining orientation and position relative to the markers.</strong></p>
<p>Create another attribute in the Marker class that gives an indication of orientation and position relative to the markers.</p>
<div class="admonition note">
<p class="admonition-title fa fa-exclamation-circle"><strong>Hint:</strong></p>
<p>This has to do with the camera’s perceived shape of the marker. You may also need to write one or more helper functions in the Marker class for determining this value. When done, write an explanation of what you came up with and provide supporting images/videos.</p>
</div>
</section>
</section>
<section id="Unit-3---Tello-Control">
<h2>Unit 3 - Tello Control<a class="headerlink" href="#Unit-3---Tello-Control" title="Permalink to this headline"></a></h2>
<p>In this unit you’ll be using the knowledge you just acquired of PID and controls to write code to fly the drone semi-autonomously and incorporate autonomous components as you go.</p>
<section id="Fly-in-a-Perfect-Circle">
<h3>Fly in a Perfect Circle<a class="headerlink" href="#Fly-in-a-Perfect-Circle" title="Permalink to this headline"></a></h3>
<p>Write a script similar to Unit 1 Challenge 3, except this time, use the <code class="docutils literal notranslate"><span class="pre">send_rc_control()</span></code> function and command your drone to fly in a perfect circle.</p>
</section>
<section id="Yaw-ArUco-Marker-Tracker">
<h3>Yaw ArUco Marker Tracker<a class="headerlink" href="#Yaw-ArUco-Marker-Tracker" title="Permalink to this headline"></a></h3>
<p>Write an algorithm that commands the drone to takeoff, fly up to a certain height, and locate aruco markers. Then, adjusting only the yaw parameter of the <code class="docutils literal notranslate"><span class="pre">send_rc_control()</span></code> function, have the drone remain in the same position but autonomously adjust it’s orientation to face and track the aruco marker.</p>
<div class="admonition note">
<p class="admonition-title fa fa-exclamation-circle"><strong>Hint:</strong></p>
<p>This may necessitate the implementation of a PID controller. Think of how you can utilize the code you wrote in Unit 2 to help you determine a way to calculate error to help with PID implementation. When completed, film a video of you walking around your drone with an aruco marker in hand while your drone autonomously tracks the marker and adjusts its yaw to face the marker.</p>
</div>
</section>
<section id="Stationary-ArUco-Marker-Tracker">
<h3>Stationary ArUco Marker Tracker<a class="headerlink" href="#Stationary-ArUco-Marker-Tracker" title="Permalink to this headline"></a></h3>
<p>Tape your marker on the wall. Then write a script to have the drone take off, locate the marker, and autonomously adjust all four parameters of the <code class="docutils literal notranslate"><span class="pre">send_rc_control()</span></code> function to command the drone to be flying right in front of the marker at a predetermined distance. This distance is up to you to determine. The goal is to implement PID controls for all four parameters such that if the drone were to be nudged/pulled/pushed during flight, it would quickly correct and return to the set point.</p>
<div class="admonition warning">
<p class="admonition-title fa fa-exclamation-circle"><strong>Challenge Warning:</strong></p>
<p>This is a tough challenge so get as far as you can and reach out to your peers and instructors for help. Post a video of your final progress when complete.</p>
</div>
</section>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="obstacle_avoidance.html" class="btn btn-neutral float-left" title="AR Obstacle Avoidance" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="vim_tutorial.html" class="btn btn-neutral float-right" title="Vim Text Editor" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2021, Beaver Works Summer Institute, Nathaniel Hanson, Kendrick Cancio, Ross Allen, Mark Mazumder.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>